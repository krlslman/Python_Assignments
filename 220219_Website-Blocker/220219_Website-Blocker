from datetime import datetime
from mailbox import linesep
from ntpath import join

end_time = datetime(2022, 2, 19, 14)

sites_to_block = ['www.facebook.com', 'facebook.com']

hosts_path = "\etc\hosts"


redirect_path = "127.0.0.1"

def block_sites():
	if datetime.now() < end_time:
		print("block sites...")
		with open(hosts_path, 'r+') as hostfile:   #r+ is read and write
			hosts_content = hostfile.read()
			for site in sites_to_block:
				if site not in hosts_content:
					hostsfile.write(redirect + " " + site + "\n")
	else:
		print("unblock sites.")
		with open(hosts_path, 'r') as hostsfile:
			lines = hostfile.readlines()
			hostfile.seek(0)
			for line in line:
				if not any(site in line for site in sites_to_block):
					hostfile.writeline(line)
			hostfile.truncate()

if __name__ == '__main__':
	# SOME METHODS;
	# 1. run manually
	# 2. cron join
	# 3. while True
	block_sites()
